var pe=Object.defineProperty;var me=(e,t,n)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var N=(e,t,n)=>me(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function L(){}function se(e){return e()}function G(){return Object.create(null)}function M(e){e.forEach(se)}function oe(e){return typeof e=="function"}function ie(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ge(e){return Object.keys(e).length===0}function _(e,t){e.appendChild(t)}function y(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function ue(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function x(e){return document.createTextNode(e)}function P(){return x(" ")}function _e(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $e(e){return Array.from(e.childNodes)}function V(e,t){t=""+t,e.data!==t&&(e.data=t)}function H(e,t){e.value=t??""}let W;function O(e){W=e}const v=[],J=[];let I=[];const Z=[],be=Promise.resolve();let k=!1;function Ne(){k||(k=!0,be.then(le))}function F(e){I.push(e)}const X=new Set;let T=0;function le(){if(T!==0)return;const e=W;do{try{for(;T<v.length;){const t=v[T];T++,O(t),Ee(t.$$)}}catch(t){throw v.length=0,T=0,t}for(O(null),v.length=0,T=0;J.length;)J.pop()();for(let t=0;t<I.length;t+=1){const n=I[t];X.has(n)||(X.add(n),n())}I.length=0}while(v.length);for(;Z.length;)Z.pop()();k=!1,X.clear(),O(e)}function Ee(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}function Te(e){const t=[],n=[];I.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),I=t}const U=new Set;let E;function ve(){E={r:0,c:[],p:E}}function Ae(){E.r||M(E.c),E=E.p}function w(e,t){e&&e.i&&(U.delete(e),e.i(t))}function K(e,t,n,r){if(e&&e.o){if(U.has(e))return;U.add(e),E.c.push(()=>{U.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function B(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ie(e){e&&e.c()}function fe(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),F(()=>{const o=e.$$.on_mount.map(se).filter(oe);e.$$.on_destroy?e.$$.on_destroy.push(...o):M(o),e.$$.on_mount=[]}),s.forEach(F)}function ce(e,t){const n=e.$$;n.fragment!==null&&(Te(n.after_update),M(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ye(e,t){e.$$.dirty[0]===-1&&(v.push(e),Ne(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ae(e,t,n,r,s,o,a=null,d=[-1]){const u=W;O(e);const i=e.$$={fragment:null,ctx:[],props:o,update:L,not_equal:s,bound:G(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:G(),dirty:d,skip_bound:!1,root:t.target||u.$$.root};a&&a(i.root);let f=!1;if(i.ctx=n?n(e,t.props||{},(l,p,...h)=>{const g=h.length?h[0]:p;return i.ctx&&s(i.ctx[l],i.ctx[l]=g)&&(!i.skip_bound&&i.bound[l]&&i.bound[l](g),f&&ye(e,l)),p}):[],i.update(),f=!0,M(i.before_update),i.fragment=r?r(i.ctx):!1,t.target){if(t.hydrate){const l=$e(t.target);i.fragment&&i.fragment.l(l),l.forEach(A)}else i.fragment&&i.fragment.c();t.intro&&w(e.$$.fragment),fe(e,t.target,t.anchor),le()}O(u)}class he{constructor(){N(this,"$$");N(this,"$$set")}$destroy(){ce(this,1),this.$destroy=L}$on(t,n){if(!oe(n))return L;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Oe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oe);var c=(e=>(e[e.NOP=0]="NOP",e[e.ADD=1]="ADD",e[e.SUBTRACT=2]="SUBTRACT",e[e.MULTIPLY=3]="MULTIPLY",e[e.DIVIDE=4]="DIVIDE",e[e.EXPONENTIATE=5]="EXPONENTIATE",e))(c||{});function Y(e,t){if(e.length!==t.length)return!1;const n={},r={};for(const s of e){const o=s.operand;n[o]=(n[o]||0)+1}for(const s of t){const o=s.operand;r[o]=(r[o]||0)+1}for(const s in n)if(n[s]!==r[s])return!1;return!0}function we(e,t){if(e.length!==t.length||e.some(u=>u.op===c.EXPONENTIATE)||t.some(u=>u.op===c.EXPONENTIATE))return!1;const n=e.filter(u=>u.op===c.MULTIPLY||u.op===c.NOP),r=t.filter(u=>u.op===c.MULTIPLY||u.op===c.NOP);if(!Y(n,r))return!1;const s=e.filter(u=>u.op===c.ADD),o=t.filter(u=>u.op===c.ADD);if(!Y(s,o))return!1;const a=e.filter(u=>u.op===c.SUBTRACT),d=t.filter(u=>u.op===c.SUBTRACT);return!!Y(a,d)}function S(e,t=1e-9){return Math.abs(e-Math.round(e))<t}function Q(e){switch(e){case c.NOP:return"";case c.ADD:return"+";case c.SUBTRACT:return"-";case c.MULTIPLY:return"*";case c.DIVIDE:return"/";case c.EXPONENTIATE:return"^"}return""}function q(e){const t=[];if(e<2)return[];for(;e%2===0;)t.push(2),e=e/2;for(let n=3;n<=Math.sqrt(e);n+=2)for(;e%n===0;)t.push(n),e=e/n;return e>2&&t.push(e),t}function ee(e,t,n){const r=e.slice();return r[2]=t[n],r}function te(e){let t,n=Q(e[2].op)+"",r,s,o,a,d=e[2].operand+"",u;return{c(){t=b("div"),r=x(n),o=P(),a=b("div"),u=x(d),$(t,"class",s="operation "+e[1](e[2].op)+" svelte-lk88"),$(a,"class","operand svelte-lk88")},m(i,f){y(i,t,f),_(t,r),y(i,o,f),y(i,a,f),_(a,u)},p(i,f){f&1&&n!==(n=Q(i[2].op)+"")&&V(r,n),f&1&&s!==(s="operation "+i[1](i[2].op)+" svelte-lk88")&&$(t,"class",s),f&1&&d!==(d=i[2].operand+"")&&V(u,d)},d(i){i&&(A(t),A(o),A(a))}}}function De(e){let t,n,r,s,o,a=e[0].getTarget()+"",d,u=B(e[0].getOperations()),i=[];for(let f=0;f<u.length;f+=1)i[f]=te(ee(e,u,f));return{c(){t=b("div");for(let f=0;f<i.length;f+=1)i[f].c();n=P(),r=b("div"),r.textContent="=",s=P(),o=b("div"),d=x(a),$(r,"class","operation svelte-lk88"),$(o,"class","operand svelte-lk88"),$(t,"class","solution svelte-lk88")},m(f,l){y(f,t,l);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(t,null);_(t,n),_(t,r),_(t,s),_(t,o),_(o,d)},p(f,[l]){if(l&3){u=B(f[0].getOperations());let p;for(p=0;p<u.length;p+=1){const h=ee(f,u,p);i[p]?i[p].p(h,l):(i[p]=te(h),i[p].c(),i[p].m(t,n))}for(;p<i.length;p+=1)i[p].d(1);i.length=u.length}l&1&&a!==(a=f[0].getTarget()+"")&&V(d,a)},i:L,o:L,d(f){f&&A(t),ue(i,f)}}}function Ce(e,t,n){let{item:r}=t;function s(o){switch(o){case c.NOP:return"NOP";case c.ADD:return"ADD";case c.SUBTRACT:return"SUBTRACT";case c.MULTIPLY:return"MULTIPLY";case c.DIVIDE:return"DIVIDE";case c.EXPONENTIATE:return"EXPONENTIATE"}return"NOP"}return e.$$set=o=>{"item"in o&&n(0,r=o.item)},[r,s]}class Le extends he{constructor(t){super(),ae(this,t,Ce,De,ie,{item:0})}}class D{constructor(t){N(this,"number");N(this,"ops");N(this,"operations",[]);this.target=t,this.number=t,this.ops=`= ${t}`,t!=Math.round(t)&&console.log({target:t})}performOperation(t,n){if(this.operations.unshift({op:t,operand:n}),t===c.NOP)this.ops=`${n} ${this.ops}`;else if(t===c.ADD)this.ops=`+ ${n} ${this.ops}`,this.number-=n;else if(t===c.SUBTRACT)this.ops=`- ${n} ${this.ops}`,this.number+=n;else if(t===c.MULTIPLY)this.ops=`* ${n} ${this.ops}`,this.number/=n,S(this.number)&&(this.number=Math.round(this.number));else if(t===c.EXPONENTIATE)this.ops=`^ ${n} ${this.ops}`,this.number=Math.pow(this.number,1/n),S(this.number)&&(this.number=Math.round(this.number));else throw new Error("not implemented");return this}getCurrentNumber(){return this.number}getTarget(){return this.target}getOperations(){return this.operations}clone(){const t=new D(this.target);return t.number=this.number,t.ops=this.ops.repeat(1),t.operations=[...this.operations],t}toSolution(){return{ops:this.ops}}}class Pe{constructor(){N(this,"items",[])}length(){return this.items.length}add(t){this.items.push(t)}process(t){const n=this.items;this.items=[];for(const r of n)t(this,r)}print(){for(const t of this.items)console.log({item:t})}}const R=[1,2,3,4,5,6,7,8,9,11,12,13,14,15,16],de=R.filter(e=>e!==1).reverse(),j=15,Me=de.filter(e=>e!==2);function Ue(e,t){const n=new D(t);q(n.getCurrentNumber()).some(s=>s>j)||e.add(n),R.forEach(s=>{const o=new D(t).performOperation(c.ADD,s);o.getCurrentNumber()>0&&(q(o.getCurrentNumber()).some(d=>d>j)||e.add(o))}),R.forEach(s=>{const o=new D(t).performOperation(c.SUBTRACT,s);q(o.getCurrentNumber()).some(d=>d>j)||e.add(o)})}let C=[];function xe(e){C.some(n=>we(n.getOperations(),e.getOperations()))||C.push(e)}function Be(e,t){for(const n of R)if(t.getCurrentNumber()===n){xe(t.clone().performOperation(c.NOP,n));return}for(const n of de){const r=t.getCurrentNumber()/n;S(r)&&e.add(t.clone().performOperation(c.MULTIPLY,n))}for(const n of Me){const r=Math.pow(t.getCurrentNumber(),1/n);S(r)&&e.add(t.clone().performOperation(c.EXPONENTIATE,n))}}function Se(e){const t=new Pe;C=[],Ue(t,e);do t.process(Be);while(t.length()>0&&C.length<5);return C}function ne(e,t,n){const r=e.slice();return r[4]=t[n],r}function re(e){let t,n;return t=new Le({props:{item:e[4]}}),{c(){Ie(t.$$.fragment)},m(r,s){fe(t,r,s),n=!0},p(r,s){const o={};s&2&&(o.item=r[4]),t.$set(o)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){K(t.$$.fragment,r),n=!1},d(r){ce(t,r)}}}function Re(e){let t,n,r,s,o,a,d,u,i,f=B(e[1]),l=[];for(let h=0;h<f.length;h+=1)l[h]=re(ne(e,f,h));const p=h=>K(l[h],1,1,()=>{l[h]=null});return{c(){t=b("main"),n=b("h1"),n.textContent="Beltmatic",r=P(),s=b("input"),o=P(),a=b("div");for(let h=0;h<l.length;h+=1)l[h].c();$(s,"type","text"),$(s,"placeholder","number"),$(s,"class","svelte-43aquj"),$(a,"class","svelte-43aquj")},m(h,g){y(h,t,g),_(t,n),_(t,r),_(t,s),H(s,e[0]),_(t,o),_(t,a);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(a,null);d=!0,u||(i=_e(s,"input",e[2]),u=!0)},p(h,[g]){if(g&1&&s.value!==h[0]&&H(s,h[0]),g&2){f=B(h[1]);let m;for(m=0;m<f.length;m+=1){const z=ne(h,f,m);l[m]?(l[m].p(z,g),w(l[m],1)):(l[m]=re(z),l[m].c(),w(l[m],1),l[m].m(a,null))}for(ve(),m=f.length;m<l.length;m+=1)p(m);Ae()}},i(h){if(!d){for(let g=0;g<f.length;g+=1)w(l[g]);d=!0}},o(h){l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)K(l[g]);d=!1},d(h){h&&A(t),ue(l,h),u=!1,i()}}}function Xe(e,t,n){let r,s=2197;function o(d){const u=Number(d);return Number.isInteger(u)?u<1?[]:Se(u):[]}function a(){s=this.value,n(0,s)}return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=o(s))},[s,r,a]}class Ye extends he{constructor(t){super(),ae(this,t,Xe,Re,ie,{})}}new Ye({target:document.getElementById("app")});
