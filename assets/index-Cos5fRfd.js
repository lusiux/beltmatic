var ve=Object.defineProperty;var Ee=(t,e,n)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>Ee(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function k(){}function ae(t){return t()}function Z(){return Object.create(null)}function R(t){t.forEach(ae)}function he(t){return typeof t=="function"}function de(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Te(t){return Object.keys(t).length===0}function N(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function V(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function U(){return w(" ")}function $e(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function T(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ie(t){return Array.from(t.childNodes)}function B(t,e){e=""+e,t.data!==e&&(t.data=e)}function Q(t,e){t.value=e??""}let z;function P(t){z=t}const D=[],ee=[];let M=[];const te=[],Ae=Promise.resolve();let F=!1;function Ue(){F||(F=!0,Ae.then(me))}function W(t){M.push(t)}const Y=new Set;let C=0;function me(){if(C!==0)return;const t=z;do{try{for(;C<D.length;){const e=D[C];C++,P(e),ye(e.$$)}}catch(e){throw D.length=0,C=0,e}for(P(null),D.length=0,C=0;ee.length;)ee.pop()();for(let e=0;e<M.length;e+=1){const n=M[e];Y.has(n)||(Y.add(n),n())}M.length=0}while(D.length);for(;te.length;)te.pop()();F=!1,Y.clear(),P(t)}function ye(t){if(t.fragment!==null){t.update(),R(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}function Oe(t){const e=[],n=[];M.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),M=e}const S=new Set;let O;function we(){O={r:0,c:[],p:O}}function Ce(){O.r||R(O.c),O=O.p}function x(t,e){t&&t.i&&(S.delete(t),t.i(e))}function H(t,e,n,r){if(t&&t.o){if(S.has(t))return;S.add(t),O.c.push(()=>{S.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function L(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function De(t){t&&t.c()}function pe(t,e,n){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),W(()=>{const i=t.$$.on_mount.map(ae).filter(he);t.$$.on_destroy?t.$$.on_destroy.push(...i):R(i),t.$$.on_mount=[]}),s.forEach(W)}function ge(t,e){const n=t.$$;n.fragment!==null&&(Oe(n.after_update),R(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Le(t,e){t.$$.dirty[0]===-1&&(D.push(t),Ue(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function _e(t,e,n,r,s,i,m=null,v=[-1]){const _=z;P(t);const u=t.$$={fragment:null,ctx:[],props:i,update:k,not_equal:s,bound:Z(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(_?_.$$.context:[])),callbacks:Z(),dirty:v,skip_bound:!1,root:e.target||_.$$.root};m&&m(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(a,p,...c)=>{const o=c.length?c[0]:p;return u.ctx&&s(u.ctx[a],u.ctx[a]=o)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](o),d&&Le(t,a)),p}):[],u.update(),d=!0,R(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const a=Ie(e.target);u.fragment&&u.fragment.l(a),a.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&x(t.$$.fragment),pe(t,e.target,e.anchor),me()}P(_)}class be{constructor(){A(this,"$$");A(this,"$$set")}$destroy(){ge(this,1),this.$destroy=k}$on(e,n){if(!he(n))return k;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!Te(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qe);var g=(t=>(t[t.NOP=0]="NOP",t[t.ADD=1]="ADD",t[t.SUBTRACT=2]="SUBTRACT",t[t.MULTIPLY=3]="MULTIPLY",t[t.DIVIDE=4]="DIVIDE",t[t.EXPONENTIATE=5]="EXPONENTIATE",t))(g||{});function j(t,e=1e-9){return Math.abs(t-Math.round(t))<e}function ne(t){switch(t){case g.NOP:return"";case g.ADD:return"+";case g.SUBTRACT:return"-";case g.MULTIPLY:return"*";case g.DIVIDE:return"/";case g.EXPONENTIATE:return"^"}return""}function Me(t){const e=[];if(t<2)return[];for(;t%2===0;)e.push(2),t=t/2;for(let n=3;n<=Math.sqrt(t);n+=2)for(;t%n===0;)e.push(n),t=t/n;return t>2&&e.push(t),e}function Pe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function xe(t){return Array.from(new Set(t))}function re(t,e,n){const r=t.slice();return r[2]=e[n],r}function se(t,e,n){const r=t.slice();return r[5]=e[n],r}function ie(t){let e,n=t[5]+"",r;return{c(){e=$("div"),r=w(n),T(e,"class","extraction svelte-1midkqp")},m(s,i){y(s,e,i),N(e,r)},p(s,i){i&1&&n!==(n=s[5]+"")&&B(r,n)},d(s){s&&I(e)}}}function oe(t){let e,n=ne(t[2].op)+"",r,s,i,m,v=t[2].operand+"",_;return{c(){e=$("div"),r=w(n),i=U(),m=$("div"),_=w(v),T(e,"class",s="operation "+t[1](t[2].op)+" svelte-1midkqp"),T(m,"class","operand svelte-1midkqp")},m(u,d){y(u,e,d),N(e,r),y(u,i,d),y(u,m,d),N(m,_)},p(u,d){d&1&&n!==(n=ne(u[2].op)+"")&&B(r,n),d&1&&s!==(s="operation "+u[1](u[2].op)+" svelte-1midkqp")&&T(e,"class",s),d&1&&v!==(v=u[2].operand+"")&&B(_,v)},d(u){u&&(I(e),I(i),I(m))}}}function ke(t){let e,n,r,s,i,m,v,_=t[0].getTarget()+"",u,d=L(t[0].getUniqueUsedNumbers()),a=[];for(let o=0;o<d.length;o+=1)a[o]=ie(se(t,d,o));let p=L(t[0].getOperations()),c=[];for(let o=0;o<p.length;o+=1)c[o]=oe(re(t,p,o));return{c(){e=$("div"),n=$("div");for(let o=0;o<a.length;o+=1)a[o].c();r=U();for(let o=0;o<c.length;o+=1)c[o].c();s=U(),i=$("div"),i.textContent="=",m=U(),v=$("div"),u=w(_),T(n,"class","extractions svelte-1midkqp"),T(i,"class","operation svelte-1midkqp"),T(v,"class","operand svelte-1midkqp"),T(e,"class","solution svelte-1midkqp")},m(o,h){y(o,e,h),N(e,n);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(n,null);N(e,r);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(e,null);N(e,s),N(e,i),N(e,m),N(e,v),N(v,u)},p(o,[h]){if(h&1){d=L(o[0].getUniqueUsedNumbers());let l;for(l=0;l<d.length;l+=1){const f=se(o,d,l);a[l]?a[l].p(f,h):(a[l]=ie(f),a[l].c(),a[l].m(n,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=d.length}if(h&3){p=L(o[0].getOperations());let l;for(l=0;l<p.length;l+=1){const f=re(o,p,l);c[l]?c[l].p(f,h):(c[l]=oe(f),c[l].c(),c[l].m(e,s))}for(;l<c.length;l+=1)c[l].d(1);c.length=p.length}h&1&&_!==(_=o[0].getTarget()+"")&&B(u,_)},i:k,o:k,d(o){o&&I(e),V(a,o),V(c,o)}}}function Be(t,e,n){let{item:r}=e;function s(i){switch(i){case g.NOP:return"NOP";case g.ADD:return"ADD";case g.SUBTRACT:return"SUBTRACT";case g.MULTIPLY:return"MULTIPLY";case g.DIVIDE:return"DIVIDE";case g.EXPONENTIATE:return"EXPONENTIATE"}return"NOP"}return t.$$set=i=>{"item"in i&&n(0,r=i.item)},[r,s]}class Re extends be{constructor(e){super(),_e(this,e,Be,ke,de,{item:0})}}class G{constructor(e){A(this,"number");A(this,"ops");A(this,"operations",[]);A(this,"usedNumbers",[]);this.target=e,this.number=e,this.ops=`= ${e}`,e!=Math.round(e)&&console.log({target:e})}performOperation(e,n){if(this.operations.unshift({op:e,operand:n}),e===g.NOP)this.ops=`${n} ${this.ops}`;else if(e===g.ADD)this.ops=`+ ${n} ${this.ops}`,this.number-=n;else if(e===g.SUBTRACT)this.ops=`- ${n} ${this.ops}`,this.number+=n;else if(e===g.MULTIPLY)this.ops=`* ${n} ${this.ops}`,this.number/=n,j(this.number)&&(this.number=Math.round(this.number));else if(e===g.EXPONENTIATE)this.ops=`^ ${n} ${this.ops}`,this.number=Math.pow(this.number,1/n),j(this.number)&&(this.number=Math.round(this.number));else throw new Error("not implemented");return this}getCurrentNumber(){return this.number}getTarget(){return this.target}getOperations(){return this.operations}clone(){const e=new G(this.target);return e.number=this.number,e.ops=this.ops.repeat(1),e.operations=[...this.operations],e}toSolution(){return{ops:this.ops}}getUsedNumbers(){return this.usedNumbers.length===0&&(this.usedNumbers=this.operations.map(e=>e.operand).sort((e,n)=>e-n)),this.usedNumbers}getUniqueUsedNumbers(){return this.usedNumbers.length===0&&(this.usedNumbers=this.operations.map(e=>e.operand).sort((e,n)=>e-n)),xe(this.usedNumbers)}}class Se{constructor(){A(this,"items",[])}length(){return this.items.length}add(e){this.items.push(e)}process(e){const n=this.items;this.items=[];for(const r of n)e(this,r)}print(){for(const e of this.items)console.log({item:e})}}const X=[1,2,3,4,5,6,7,8,9,11,12,13,14,15,16],je=Math.max(...X),Ne=X.filter(t=>t!==1).reverse(),Xe=Ne;function Ye(t){return X.some(e=>e===t)}function K(t,e){t.add(e),X.forEach(n=>{t.add(e.clone().performOperation(g.ADD,n)),t.add(e.clone().performOperation(g.SUBTRACT,n))})}function Ve(t,e){Me(e.getCurrentNumber()).some(r=>r>je)||t.add(e)}let q=[];function Fe(t,e){return t.getUsedNumbers().length!==e.getUsedNumbers().length?!1:Pe(t.getUsedNumbers(),e.getUsedNumbers())}function We(t){q.some(n=>Fe(n,t))||q.push(t)}function He(t,e){if(e.getCurrentNumber()<1)return;if(Ye(e.getCurrentNumber())){We(e.performOperation(g.NOP,e.getCurrentNumber()));return}const n=t.length();for(const r of Ne){const s=e.getCurrentNumber()/r;j(s)&&t.add(e.clone().performOperation(g.MULTIPLY,r))}for(const r of Xe){const s=Math.pow(e.getCurrentNumber(),1/r);j(s)&&t.add(e.clone().performOperation(g.EXPONENTIATE,r))}t.length()===n&&K(t,e)}function Ke(t){const e=new Se;q=[];let n=0;const r=new G(t);K(e,r),e.process(Ve),e.length()===0&&K(e,r);do n+=e.length(),e.process(He);while(e.length()>0&&q.length<5);return q.sort((s,i)=>s.getUniqueUsedNumbers().length-i.getUniqueUsedNumbers().length),{solutions:q,checkedItems:n}}function ue(t,e,n){const r=t.slice();return r[6]=e[n],r}function le(t){let e;return{c(){e=$("div"),e.textContent="Calculating...",T(e,"class","svelte-43aquj")},m(n,r){y(n,e,r)},d(n){n&&I(e)}}}function ce(t){let e,n,r;return{c(){e=$("div"),n=w("Numbers checked: "),r=w(t[2]),T(e,"class","svelte-43aquj")},m(s,i){y(s,e,i),N(e,n),N(e,r)},p(s,i){i&4&&B(r,s[2])},d(s){s&&I(e)}}}function fe(t){let e,n;return e=new Re({props:{item:t[6]}}),{c(){De(e.$$.fragment)},m(r,s){pe(e,r,s),n=!0},p(r,s){const i={};s&2&&(i.item=r[6]),e.$set(i)},i(r){n||(x(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){ge(e,r)}}}function ze(t){let e,n,r,s,i,m,v,_,u,d,a,p=t[3]&&le(),c=t[2]>0&&ce(t),o=L(t[1]),h=[];for(let f=0;f<o.length;f+=1)h[f]=fe(ue(t,o,f));const l=f=>H(h[f],1,1,()=>{h[f]=null});return{c(){e=$("main"),n=$("h1"),n.textContent="Beltmatic Calculator",r=U(),s=$("input"),i=U(),p&&p.c(),m=U(),c&&c.c(),v=U(),_=$("div");for(let f=0;f<h.length;f+=1)h[f].c();T(s,"type","text"),T(s,"placeholder","number"),T(s,"class","svelte-43aquj"),T(_,"class","svelte-43aquj")},m(f,E){y(f,e,E),N(e,n),N(e,r),N(e,s),Q(s,t[0]),N(e,i),p&&p.m(e,null),N(e,m),c&&c.m(e,null),N(e,v),N(e,_);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(_,null);u=!0,d||(a=$e(s,"input",t[4]),d=!0)},p(f,[E]){if(E&1&&s.value!==f[0]&&Q(s,f[0]),f[3]?p||(p=le(),p.c(),p.m(e,m)):p&&(p.d(1),p=null),f[2]>0?c?c.p(f,E):(c=ce(f),c.c(),c.m(e,v)):c&&(c.d(1),c=null),E&2){o=L(f[1]);let b;for(b=0;b<o.length;b+=1){const J=ue(f,o,b);h[b]?(h[b].p(J,E),x(h[b],1)):(h[b]=fe(J),h[b].c(),x(h[b],1),h[b].m(_,null))}for(we(),b=o.length;b<h.length;b+=1)l(b);Ce()}},i(f){if(!u){for(let E=0;E<o.length;E+=1)x(h[E]);u=!0}},o(f){h=h.filter(Boolean);for(let E=0;E<h.length;E+=1)H(h[E]);u=!1},d(f){f&&I(e),p&&p.d(),c&&c.d(),V(h,f),d=!1,a()}}}function Ge(t,e,n){let r=42,s=[],i=0,m=!1;function v(u){const d=Number(u);Number.isInteger(d)||(n(1,s=[]),n(2,i=0)),d<1&&(n(1,s=[]),n(2,i=0)),n(3,m=!0),n(1,s=[]),n(2,i=0),setTimeout(()=>{const a=Ke(d);n(1,s=a.solutions),n(2,i=a.checkedItems),n(3,m=!1)},1)}function _(){r=this.value,n(0,r)}return t.$$.update=()=>{t.$$.dirty&1&&v(r)},[r,s,i,m,_]}class Je extends be{constructor(e){super(),_e(this,e,Ge,ze,de,{})}}new Je({target:document.getElementById("app")});
